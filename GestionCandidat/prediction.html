<!DOCTYPE html>
<html ng-app="gestionCandidatApp">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Prédiction</title>
    <meta charset="utf-8" />
    <script src="scripts/angular.min.js"></script>
    <script src="scripts/angular-cookies.min.js"></script>
    <script src="scripts/angular-route.js"></script>
    <script src="js/script.js"></script>
    <script src="scripts/c3.js"></script>
    <script src="scripts/c3.min.js"></script>
    <script src="scripts/d3.js" charset="utf-8"></script>
    <script src="scripts/d3.min.js" charset="utf-8"></script>
    <link rel="shortcut icon" href="images/favicon.ico">
    <link href="Content/c3.css" rel="stylesheet" type="text/css">
    <link href="Content/c3.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="Content/bootstrap.min.css">
    <script type="text/javascript" src="scripts/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="scripts/bootstrap.min.js"></script>
    <meta charset="utf-8" />
    <script>
        function divOnloadHidden() {
            document.getElementById("erreurChamp").style.visibility = 'hidden';
        }

        function verifChamp() {
            var satisfaction_level = document.getElementById("satisfaction_level");
            var last_evaluation = document.getElementById("last_evaluation");
            var number_project = document.getElementById("number_project");
            var average_montly_hours = document.getElementById("average_montly_hours");
            var time_spend_company = document.getElementById("time_spend_company");
            var Work_accident = document.getElementById("Work_accident");
            var promotion_last_5years = document.getElementById("promotion_last_5years");
            var sales = document.getElementById("sales");
            var salary = document.getElementById("salary");
            var i = 0;
            if (satisfaction_level.value == "") {
                satisfaction_level.style.borderColor = "red";
                i = 1;
            } else {
                satisfaction_level.style.borderColor = "";
            }
            if (last_evaluation.value == "") {
                last_evaluation.style.borderColor = "red";
                i = 1;
            } else {
                last_evaluation.style.borderColor = "";
            }
            if (number_project.value == "") {
                number_project.style.borderColor = "red";
                i = 1;
            } else {
                number_project.style.borderColor = "";
            }
            if (average_montly_hours.value == "") {
                average_montly_hours.style.borderColor = "red";
                i = 1;
            } else {
                average_montly_hours.style.borderColor = "";
            }
            if (time_spend_company.value == "") {
                time_spend_company.style.borderColor = "red";
                i = 1;
            } else {
                time_spend_company.style.borderColor = "";
            }
            if (Work_accident.value == "? undefined:undefined ?") {
                Work_accident.style.borderColor = "red";
                i = 1;
            } else {
                Work_accident.style.borderColor = "";
            }
            if (promotion_last_5years.value == "? undefined:undefined ?") {
                promotion_last_5years.style.borderColor = "red";
                i = 1;
            } else {
                promotion_last_5years.style.borderColor = "";
            }
            if (sales.value == "? undefined:undefined ?") {
                sales.style.borderColor = "red";
                i = 1;
            } else {
                sales.style.borderColor = "";
            }
            if (salary.value == "? undefined:undefined ?") {
                salary.style.borderColor = "red";
                i = 1;
            } else {
                salary.style.borderColor = "";
            }
            
            if (!Boolean(i)) {
                document.getElementById("erreurChamp").style.display = 'none';
                document.getElementById("reponsetable").style.display = 'block';
            } else {
                document.getElementById("erreurChamp").style.display = 'block';
                document.getElementById("reponsetable").style.display = 'none';
            }
        }


    </script>
</head>

<body>
    <div ng-include="'barreMenu.html'"></div>
    <br />
    <center><div class="bg-info text-white"><p class="h1">Prédiction</p></div></center>
    <br />
    <center><p class="h3">Prédiction : le salarié serait-il suceptible de quitter ou non l'entreprise ?</p></center>
    <br />
    <div id="erreurChamp" hidden="hidden">
        <center><p class="h3"><font color="red">Veuillez remplir les champs rouges</font></p></center>
    </div>
    <br />
    <section ng-controller="predictionAzure">
        <form ng-submit="sendValueForAzure(prediction)">
            <table border="1" align="center">
                <tbody>
                    <tr>
                        <td><label><font color="red">*</font>Niveau de satisfaction (décimal entre 0 à 1)</label></td>
                        <td><input class="form-control" type="number" step="0.01" min="0" max="1" id="satisfaction_level" ng-model="prediction.satisfaction_level" placeholder="0 à 1" /></td>
                    </tr>
                    <tr>
                        <td><label><font color="red">*</font>Dernière évaluation (décimal entre 0 à 1)</label></td>
                        <td><input class="form-control" type="number" step="0.01" min="0" max="1" id="last_evaluation" ng-model="prediction.last_evaluation" placeholder="0 à 1" /></td>
                    </tr>
                    <tr>
                        <td><label><font color="red">*</font>Nombre de projet réalisé</label></td>
                        <td><input class="form-control" type="number" id="number_project" min="0" ng-model="prediction.number_project" placeholder="Nombre de projet..." /></td>
                    </tr>
                    <tr>
                        <td><label><font color="red">*</font>Moyenne d'heures travaillé par mois</label></td>
                        <td><input class="form-control" type="number" min="0" max="4040" id="average_montly_hours" ng-model="prediction.average_montly_hours" placeholder="Nombre d'heures..." /></td>
                    </tr>
                    <tr>
                        <td><label><font color="red">*</font>Temps passé à l'entreprise (en année)</label></td>
                        <td><input class="form-control" type="number" min="0" max="66" id="time_spend_company" ng-model="prediction.time_spend_company" placeholder="Nombre d'année..." /></td>
                    </tr>
                    <tr>
                        <td><label><font color="red">*</font>A-t-il déjà eu au moins un accident de travail ?</label></td>
                        <td>
                            <select id="Work_accident" class="form-control" ng-model="prediction.Work_accident">
                                <option value="0">NON</option>
                                <option value="1">OUI</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><label><font color="red">*</font>A-t-il déjà eu au moins une promotion durant les 5 dernières anneès ?</label></td>
                        <td>
                            <select id="promotion_last_5years" class="form-control" ng-model="prediction.promotion_last_5years">
                                <option value="0">NON</option>
                                <option value="1">OUI</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><label><font color="red">*</font>Secteur</label></td>
                        <td>
                            <select id="sales" class="form-control" ng-model="prediction.sales">
                                <option value="sales" selected>Vente</option>
                                <option value="accounting">Comptabilité</option>
                                <option value="hr">Ressource Humaine</option>
                                <option value="technical">Technique</option>
                                <option value="management">Management</option>
                                <option value="IT">IT</option>
                                <option value="product_mng">Production Management</option>
                                <option value="marketing">Marketing</option>
                                <option value="RandD">Recherche et Développement</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><label><font color="red">*</font>Salaire</label></td>
                        <td>
                            <select id="salary" class="form-control" ng-model="prediction.salary">
                                <option value="low">Faible</option>
                                <option value="middle">Moyen</option>
                                <option value="high">Fort</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" align="center">
                            <input type="submit" value="Prediction" class="btn btn-success" onclick="verifChamp()" />
                        </td>
                    </tr>
                </tbody>
            </table>
        </form>
    <br />
    <div id="reponsetable" hidden="hidden">
        <table border="1" align="center">
            <tr>
                <th colspan="2">Reponse prédiction</th>
            </tr>
            <tr>
                <th>Quite ou non l'entreprise</th>
                <th>Probabilité de la reponse</th>
            </tr>
            <tr>
                <td>{{resultatAzure}}</td>
                <td>{{probAzure}}</td>
            </tr>
        </table>
    </div>
    </section>
</body>
</html>
